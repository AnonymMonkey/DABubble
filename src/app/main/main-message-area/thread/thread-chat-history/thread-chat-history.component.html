<div #messageContainer class="message-container">
  <div *ngIf="currentMessage">
    <!-- Zeige die aktuelle Nachricht -->
    <ng-container *ngIf="isCurrentUser(currentMessage); else otherUserMessage">
      <app-own-thread-message-template [message]="currentMessage"></app-own-thread-message-template>
    </ng-container>
    <ng-template #otherUserMessage>
      <app-other-thread-message-template [message]="currentMessage"></app-other-thread-message-template>
    </ng-template>

    <div class="reply-info">
      <span>{{ (currentMessage.thread | keyvalue)?.length }} Antworten</span>
      <hr class="reply-divider">
    </div>

    <!-- Liste der Thread-Nachrichten -->
    <ng-container *ngIf="currentMessage && currentMessage.thread">
      <div *ngFor="let threadMessage of currentMessage.thread | keyvalue">
        <ng-container *ngIf="threadMessage.value && isCurrentUserThread(threadMessage.value); else otherUserThreadMessage">
          <app-own-thread-message-template [message]="threadMessage.value"></app-own-thread-message-template>
        </ng-container>
        <ng-template #otherUserThreadMessage>
          <app-other-thread-message-template [message]="threadMessage.value"></app-other-thread-message-template>
        </ng-template>
      </div>
    </ng-container>
  </div>
</div>
